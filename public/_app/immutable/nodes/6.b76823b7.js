import{s as Le,b as Ne,f as Ie,r as Fe}from"../chunks/scheduler.847f38de.js";import{S as qe,i as Re,z as Ce,g as b,r as ie,s as U,h as v,j as I,u as re,f,c as A,x as ve,k as h,a as k,v as ce,y as u,A as he,d as fe,t as ue,w as de,m as V,n as G,e as te,B as De,o as Y}from"../chunks/index.0f73e155.js";import{I as Je,e as le,a as we}from"../chunks/ItemViewer.50629e7f.js";import{I as Be,B as Ee}from"../chunks/Button.7cd793cf.js";function Me(n,s,t){const e=n.slice();return e[25]=s[t],e}function Te(n,s,t){const e=n.slice();return e[28]=s[t],e}function Oe(n,s,t){const e=n.slice();return e[25]=s[t],e[32]=t,e}function ye(n,s,t){const e=n.slice();return e[28]=s[t],e[32]=t,e}function Ke(n){let s;return{c(){s=V("اصنع")},l(t){s=G(t,"اصنع")},m(t,e){k(t,s,e)},d(t){t&&f(s)}}}function Ue(n){let s,t=le(n[1].Meals),e=[];for(let l=0;l<t.length;l+=1)e[l]=Ae(ye(n,t,l));return{c(){for(let l=0;l<e.length;l+=1)e[l].c();s=te()},l(l){for(let o=0;o<e.length;o+=1)e[o].l(l);s=te()},m(l,o){for(let a=0;a<e.length;a+=1)e[a]&&e[a].m(l,o);k(l,s,o)},p(l,o){if(o[0]&263){t=le(l[1].Meals);let a;for(a=0;a<t.length;a+=1){const r=ye(l,t,a);e[a]?e[a].p(r,o):(e[a]=Ae(r),e[a].c(),e[a].m(s.parentNode,s))}for(;a<e.length;a+=1)e[a].d(1);e.length=t.length}},d(l){l&&f(s),De(e,l)}}}function Ae(n){let s,t=n[28].Name+"",e,l,o;function a(){return n[16](n[32],n[28])}return{c(){s=b("button"),e=V(t)},l(r){s=v(r,"BUTTON",{});var d=I(s);e=G(d,t),d.forEach(f)},m(r,d){k(r,s,d),u(s,e),l||(o=he(s,"click",a),l=!0)},p(r,d){n=r,d[0]&2&&t!==(t=n[28].Name+"")&&Y(e,t)},d(r){r&&f(s),l=!1,o()}}}function Se(n){let s,t=le(n[5].Dishes),e=[];for(let l=0;l<t.length;l+=1)e[l]=Pe(Oe(n,t,l));return{c(){for(let l=0;l<e.length;l+=1)e[l].c();s=te()},l(l){for(let o=0;o<e.length;o+=1)e[o].l(l);s=te()},m(l,o){for(let a=0;a<e.length;a+=1)e[a]&&e[a].m(l,o);k(l,s,o)},p(l,o){if(o[0]&1061){t=le(l[5].Dishes);let a;for(a=0;a<t.length;a+=1){const r=Oe(l,t,a);e[a]?e[a].p(r,o):(e[a]=Pe(r),e[a].c(),e[a].m(s.parentNode,s))}for(;a<e.length;a+=1)e[a].d(1);e.length=t.length}},d(l){l&&f(s),De(e,l)}}}function Pe(n){let s,t=n[25].Name+"",e,l,o;function a(){return n[17](n[32])}return{c(){s=b("button"),e=V(t)},l(r){s=v(r,"BUTTON",{});var d=I(s);e=G(d,t),d.forEach(f)},m(r,d){k(r,s,d),u(s,e),l||(o=he(s,"click",a),l=!0)},p(r,d){n=r,d[0]&32&&t!==(t=n[25].Name+"")&&Y(e,t)},d(r){r&&f(s),l=!1,o()}}}function He(n){let s,t=le(n[1].Meals),e=[];for(let l=0;l<t.length;l+=1)e[l]=Ve(Te(n,t,l));return{c(){for(let l=0;l<e.length;l+=1)e[l].c();s=te()},l(l){for(let o=0;o<e.length;o+=1)e[o].l(l);s=te()},m(l,o){for(let a=0;a<e.length;a+=1)e[a]&&e[a].m(l,o);k(l,s,o)},p(l,o){if(o[0]&39){t=le(l[1].Meals);let a;for(a=0;a<t.length;a+=1){const r=Te(l,t,a);e[a]?e[a].p(r,o):(e[a]=Ve(r),e[a].c(),e[a].m(s.parentNode,s))}for(;a<e.length;a+=1)e[a].d(1);e.length=t.length}},d(l){l&&f(s),De(e,l)}}}function Ve(n){let s,t=n[28].Name+"",e,l,o;function a(){return n[19](n[28])}return{c(){s=b("button"),e=V(t),this.h()},l(r){s=v(r,"BUTTON",{class:!0});var d=I(s);e=G(d,t),d.forEach(f),this.h()},h(){h(s,"class","text-indigo-600 bg-black hover:bg-indigo-700 active:bg-indigo-800 hover:text-white border-none px-3 py-4")},m(r,d){k(r,s,d),u(s,e),l||(o=he(s,"click",a),l=!0)},p(r,d){n=r,d[0]&2&&t!==(t=n[28].Name+"")&&Y(e,t)},d(r){r&&f(s),l=!1,o()}}}function Ge(n){let s,t,e=n[5].Name+"",l,o,a,r=n[5].Description+"",d,m,$,T,g="طعام",N,p,L="كمية",K,j,P,Q,C=n[6](n[5])+"",z,x,q,F,J=n[7](n[5])+"",W,X,c,D="اضف اكلة",R,H,ee="ازل اكلة",se,me,S=n[5].Dishes&&n[5].Dishes.length>0&&je(n);return{c(){s=b("div"),t=b("h2"),l=V(e),o=U(),a=b("h2"),d=V(r),m=U(),$=b("dev"),T=b("h2"),T.textContent=g,N=U(),p=b("h2"),p.textContent=L,K=U(),S&&S.c(),j=U(),P=b("h2"),Q=V("مجموع السعرات:"),z=V(C),x=U(),q=b("h2"),F=V("مجموع البروتين:"),W=V(J),X=U(),c=b("button"),c.textContent=D,R=U(),H=b("button"),H.textContent=ee,this.h()},l(O){s=v(O,"DIV",{class:!0});var w=I(s);t=v(w,"H2",{class:!0});var _e=I(t);l=G(_e,e),_e.forEach(f),o=A(w),a=v(w,"H2",{class:!0});var y=I(a);d=G(y,r),y.forEach(f),m=A(w),$=v(w,"DEV",{class:!0});var E=I($);T=v(E,"H2",{class:!0,["data-svelte-h"]:!0}),ve(T)!=="svelte-17g9jd7"&&(T.textContent=g),N=A(E),p=v(E,"H2",{class:!0,["data-svelte-h"]:!0}),ve(p)!=="svelte-72jaql"&&(p.textContent=L),K=A(E),S&&S.l(E),E.forEach(f),j=A(w),P=v(w,"H2",{class:!0});var B=I(P);Q=G(B,"مجموع السعرات:"),z=G(B,C),B.forEach(f),x=A(w),q=v(w,"H2",{class:!0});var M=I(q);F=G(M,"مجموع البروتين:"),W=G(M,J),M.forEach(f),X=A(w),c=v(w,"BUTTON",{class:!0,["data-svelte-h"]:!0}),ve(c)!=="svelte-1rckm83"&&(c.textContent=D),R=A(w),H=v(w,"BUTTON",{class:!0,["data-svelte-h"]:!0}),ve(H)!=="svelte-qvl8ru"&&(H.textContent=ee),w.forEach(f),this.h()},h(){h(t,"class","font-bold text-xl"),h(a,"class","font-bold text-lg"),h(T,"class","p-3 float-left border-collapse border-black border-r-2 border-b-2"),h(p,"class","p-3 float-righ border-collapse border-black border-b-2"),h($,"class","border-2 border-solid border-black grid grid-flow-row grid-cols-2"),h(P,"class","font-bold text-lg"),h(q,"class","font-bold text-lg"),h(c,"class","mt-4 underline mx-2"),h(H,"class","mt-4 underline mx-2"),h(s,"class","bg-indigo-600 text-white rounded-md text-center p-4 my-4 space-y-4")},m(O,w){k(O,s,w),u(s,t),u(t,l),u(s,o),u(s,a),u(a,d),u(s,m),u(s,$),u($,T),u($,N),u($,p),u($,K),S&&S.m($,null),u(s,j),u(s,P),u(P,Q),u(P,z),u(s,x),u(s,q),u(q,F),u(q,W),u(s,X),u(s,c),u(s,R),u(s,H),se||(me=[he(c,"click",n[20]),he(H,"click",n[21])],se=!0)},p(O,w){w[0]&32&&e!==(e=O[5].Name+"")&&Y(l,e),w[0]&32&&r!==(r=O[5].Description+"")&&Y(d,r),O[5].Dishes&&O[5].Dishes.length>0?S?S.p(O,w):(S=je(O),S.c(),S.m($,null)):S&&(S.d(1),S=null),w[0]&32&&C!==(C=O[6](O[5])+"")&&Y(z,C),w[0]&32&&J!==(J=O[7](O[5])+"")&&Y(W,J)},d(O){O&&f(s),S&&S.d(),se=!1,Fe(me)}}}function je(n){let s,t=le(n[5].Dishes),e=[];for(let l=0;l<t.length;l+=1)e[l]=ze(Me(n,t,l));return{c(){for(let l=0;l<e.length;l+=1)e[l].c();s=te()},l(l){for(let o=0;o<e.length;o+=1)e[o].l(l);s=te()},m(l,o){for(let a=0;a<e.length;a+=1)e[a]&&e[a].m(l,o);k(l,s,o)},p(l,o){if(o[0]&32){t=le(l[5].Dishes);let a;for(a=0;a<t.length;a+=1){const r=Me(l,t,a);e[a]?e[a].p(r,o):(e[a]=ze(r),e[a].c(),e[a].m(s.parentNode,s))}for(;a<e.length;a+=1)e[a].d(1);e.length=t.length}},d(l){l&&f(s),De(e,l)}}}function ze(n){let s,t=n[25].Name+"",e,l,o,a=n[25].Amount.toFixed(1)+"",r,d,m=n[25].Unit+"",$,T;return{c(){s=b("h2"),e=V(t),l=U(),o=b("h2"),r=V(a),d=V("("),$=V(m),T=V(`)
            `),this.h()},l(g){s=v(g,"H2",{class:!0});var N=I(s);e=G(N,t),N.forEach(f),l=A(g),o=v(g,"H2",{class:!0});var p=I(o);r=G(p,a),d=G(p,"("),$=G(p,m),T=G(p,`)
            `),p.forEach(f),this.h()},h(){h(s,"class","p-3 float-left border-collapse border-black border-r-2 border-b-2"),h(o,"class","p-3 float-righ border-collapse border-black border-b-2")},m(g,N){k(g,s,N),u(s,e),k(g,l,N),k(g,o,N),u(o,r),u(o,d),u(o,$),u(o,T)},p(g,N){N[0]&32&&t!==(t=g[25].Name+"")&&Y(e,t),N[0]&32&&a!==(a=g[25].Amount.toFixed(1)+"")&&Y(r,a),N[0]&32&&m!==(m=g[25].Unit+"")&&Y($,m)},d(g){g&&(f(s),f(l),f(o))}}}function Qe(n){let s;return{c(){s=V("اضف وجبة")},l(t){s=G(t,"اضف وجبة")},m(t,e){k(t,s,e)},d(t){t&&f(s)}}}function We(n){let s;return{c(){s=V("ازل وجبة")},l(t){s=G(t,"ازل وجبة")},m(t,e){k(t,s,e)},d(t){t&&f(s)}}}function Xe(n){let s,t,e,l,o,a,r,d,m,$,T,g,N,p,L,K,j,P,Q,C,z,x="اعرض الوجبات",q,F,J,W,X,c,D,R,H,ee,se,me;t=new Je({props:{extraButton:{name:"add to meal",callback:n[12]}}});function S(i){n[13](i)}let O={name:"meal-name",id:"add-meal-name",label:"اسم الوجبة",type:"text"};n[3]!==void 0&&(O.value=n[3]),a=new Be({props:O}),Ne.push(()=>Ce(a,"value",S));function w(i){n[14](i)}let _e={name:"meal-desc",id:"add-meal-desc",label:"وصف الوجبة",type:"text"};n[4]!==void 0&&(_e.value=n[4]),m=new Be({props:_e}),Ne.push(()=>Ce(m,"value",w)),g=new Ee({props:{disabled:n[3].length==0||n[4].length==0,onClick:n[15],$$slots:{default:[Ke]},$$scope:{ctx:n}}});let y=n[1].Meals&&n[1].Meals.length>0&&Ue(n),E=n[5].Dishes&&n[5].Dishes.length>0&&Se(n),B=n[1].Meals&&n[1].Meals.length>0&&He(n),M=n[2]&&Ge(n);return D=new Ee({props:{onClick:n[22],$$slots:{default:[Qe]},$$scope:{ctx:n}}}),H=new Ee({props:{onClick:n[23],$$slots:{default:[We]},$$scope:{ctx:n}}}),{c(){s=b("dialog"),ie(t.$$.fragment),e=U(),l=b("dialog"),o=b("div"),ie(a.$$.fragment),d=U(),ie(m.$$.fragment),T=U(),ie(g.$$.fragment),N=U(),p=b("dialog"),L=b("div"),y&&y.c(),K=U(),j=b("dialog"),P=b("div"),E&&E.c(),Q=U(),C=b("section"),z=b("button"),z.textContent=x,q=U(),F=b("ul"),B&&B.c(),W=U(),M&&M.c(),X=U(),c=b("div"),ie(D.$$.fragment),R=U(),ie(H.$$.fragment),this.h()},l(i){s=v(i,"DIALOG",{close:!0,id:!0,class:!0});var _=I(s);re(t.$$.fragment,_),_.forEach(f),e=A(i),l=v(i,"DIALOG",{close:!0,id:!0,class:!0});var ge=I(l);o=v(ge,"DIV",{class:!0});var Z=I(o);re(a.$$.fragment,Z),d=A(Z),re(m.$$.fragment,Z),T=A(Z),re(g.$$.fragment,Z),Z.forEach(f),ge.forEach(f),N=A(i),p=v(i,"DIALOG",{close:!0,id:!0,class:!0});var pe=I(p);L=v(pe,"DIV",{class:!0});var ae=I(L);y&&y.l(ae),ae.forEach(f),pe.forEach(f),K=A(i),j=v(i,"DIALOG",{close:!0,id:!0,class:!0});var be=I(j);P=v(be,"DIV",{class:!0});var ne=I(P);E&&E.l(ne),ne.forEach(f),be.forEach(f),Q=A(i),C=v(i,"SECTION",{class:!0});var oe=I(C);z=v(oe,"BUTTON",{class:!0,["data-svelte-h"]:!0}),ve(z)!=="svelte-1p5davv"&&(z.textContent=x),q=A(oe),F=v(oe,"UL",{class:!0});var $e=I(F);B&&B.l($e),$e.forEach(f),W=A(oe),M&&M.l(oe),oe.forEach(f),X=A(i),c=v(i,"DIV",{class:!0});var ke=I(c);re(D.$$.fragment,ke),R=A(ke),re(H.$$.fragment,ke),ke.forEach(f),this.h()},h(){h(s,"close",""),h(s,"id","add-items-dialog"),h(s,"class","absolute mx-auto border-2 bg-slate-900 bg-opacity-90 top-40"),h(o,"class","grid grid-flow-row space-y-6 justify-items-center"),h(l,"close",""),h(l,"id","add-meals-dialog"),h(l,"class","absolute mx-auto border-2 bg-slate-900 bg-opacity-90 top-40"),h(L,"class","grid grid-flow-row text-white text-xl gap-1"),h(p,"close",""),h(p,"id","remove-meals-dialog"),h(p,"class","absolute mx-auto border-2 bg-slate-900 bg-opacity-90 top-40"),h(P,"class","grid grid-flow-row text-white text-xl gap-1"),h(j,"close",""),h(j,"id","remove-items-dialog"),h(j,"class","absolute mx-auto border-2 bg-slate-900 bg-opacity-90 top-40"),h(z,"class","inline-block text-indigo-600 bg-black hover:bg-indigo-700 active:bg-indigo-800 hover:text-white h-20"),h(F,"class",J=`grid grid-flow-row  bg-white ${n[0]?"":"hidden"}`),h(C,"class","m-auto w-10/12 max-w-screen-sm grid grid-flow-row mt-20"),h(c,"class","flex justify-center gap-3 m-auto my-4")},m(i,_){k(i,s,_),ce(t,s,null),k(i,e,_),k(i,l,_),u(l,o),ce(a,o,null),u(o,d),ce(m,o,null),u(o,T),ce(g,o,null),k(i,N,_),k(i,p,_),u(p,L),y&&y.m(L,null),k(i,K,_),k(i,j,_),u(j,P),E&&E.m(P,null),k(i,Q,_),k(i,C,_),u(C,z),u(C,q),u(C,F),B&&B.m(F,null),u(C,W),M&&M.m(C,null),k(i,X,_),k(i,c,_),ce(D,c,null),u(c,R),ce(H,c,null),ee=!0,se||(me=he(z,"click",n[18]),se=!0)},p(i,_){const ge={};_[0]&37&&(ge.extraButton={name:"add to meal",callback:i[12]}),t.$set(ge);const Z={};!r&&_[0]&8&&(r=!0,Z.value=i[3],Ie(()=>r=!1)),a.$set(Z);const pe={};!$&&_[0]&16&&($=!0,pe.value=i[4],Ie(()=>$=!1)),m.$set(pe);const ae={};_[0]&24&&(ae.disabled=i[3].length==0||i[4].length==0),_[1]&8&&(ae.$$scope={dirty:_,ctx:i}),g.$set(ae),i[1].Meals&&i[1].Meals.length>0?y?y.p(i,_):(y=Ue(i),y.c(),y.m(L,null)):y&&(y.d(1),y=null),i[5].Dishes&&i[5].Dishes.length>0?E?E.p(i,_):(E=Se(i),E.c(),E.m(P,null)):E&&(E.d(1),E=null),i[1].Meals&&i[1].Meals.length>0?B?B.p(i,_):(B=He(i),B.c(),B.m(F,null)):B&&(B.d(1),B=null),(!ee||_[0]&1&&J!==(J=`grid grid-flow-row  bg-white ${i[0]?"":"hidden"}`))&&h(F,"class",J),i[2]?M?M.p(i,_):(M=Ge(i),M.c(),M.m(C,null)):M&&(M.d(1),M=null);const be={};_[1]&8&&(be.$$scope={dirty:_,ctx:i}),D.$set(be);const ne={};_[0]&2&&(ne.onClick=i[23]),_[1]&8&&(ne.$$scope={dirty:_,ctx:i}),H.$set(ne)},i(i){ee||(fe(t.$$.fragment,i),fe(a.$$.fragment,i),fe(m.$$.fragment,i),fe(g.$$.fragment,i),fe(D.$$.fragment,i),fe(H.$$.fragment,i),ee=!0)},o(i){ue(t.$$.fragment,i),ue(a.$$.fragment,i),ue(m.$$.fragment,i),ue(g.$$.fragment,i),ue(D.$$.fragment,i),ue(H.$$.fragment,i),ee=!1},d(i){i&&(f(s),f(e),f(l),f(N),f(p),f(K),f(j),f(Q),f(C),f(X),f(c)),de(t),de(a),de(m),de(g),y&&y.d(),E&&E.d(),B&&B.d(),M&&M.d(),de(D),de(H),se=!1,me()}}}function Ye(n,s,t){let e=!1,{data:l}=s,o=l.user,a=!1,r="",d="",m={Name:"",Description:"",Dishes:[]};const $=c=>{if(!c.Dishes||c.Dishes.length<=0)return 0;let D=0;return c.Dishes.forEach(R=>{D=D+R.Cratio*R.Amount}),D.toFixed(1)},T=async()=>{t(2,a=!1),t(0,e=!1);const c=await we({method:"POST",url:"https://gobackend2-zildeus.b4a.run/get-user",headers:{key:"1202",id:String(sessionid)}}).catch(()=>{throw redirect(301,"/sign-in")});c&&t(1,o=c.data)},g=c=>{if(!c.Dishes||c.Dishes.length<=0)return 0;let D=0;return c.Dishes.forEach(R=>{D=D+R.Pratio*R.Amount}),D.toFixed(1)};async function N(c){t(2,a=!1),t(0,e=!1),console.log(c),await we({method:"POST",url:"https://gobackend2-zildeus.b4a.run/rem-meal",headers:{key:"1202",id:l.id,name:c}}),await T()}async function p(c,D){t(2,a=!1),t(0,e=!1),await we({method:"POST",url:"https://gobackend2-zildeus.b4a.run/add-meal",headers:{key:"1202",id:l.id},data:{name:c,description:D}}),await T()}async function L(){t(2,a=!1),t(0,e=!1),await we({method:"POST",url:"https://gobackend2-zildeus.b4a.run/update-meal",headers:{key:"1202",id:l.id},data:{name:m.Name,Description:m.Description,Dishes:m.Dishes}}),await T()}const K=c=>{m.Dishes||t(5,m.Dishes=Array(),m),m.Dishes.push({Name:c.Name,Cratio:c.Cratio,Pratio:c.Pratio,Amount:Number(c.Amount),Unit:c.Unit}),L(),t(2,a=!1),t(0,e=!1),document.getElementById("add-items-dialog").close()};function j(c){r=c,t(3,r)}function P(c){d=c,t(4,d)}const Q=()=>{p(document.getElementById("add-meal-name").value,document.getElementById("add-meal-desc").value),document.getElementById("add-meals-dialog").close()},C=(c,D)=>{o.Meals.splice(c,1),N(D.Name),t(2,a=!1),t(0,e=!1),document.getElementById("remove-meals-dialog").close()},z=c=>{m.Dishes.splice(c,1),L(),t(2,a=!1),t(0,e=!1),document.getElementById("remove-items-dialog").close()},x=()=>t(0,e=!e),q=c=>{t(2,a=!0),t(0,e=!1),t(5,m=c)},F=()=>document.getElementById("add-items-dialog").show(),J=()=>{m.Dishes&&m.Dishes.length>0&&document.getElementById("remove-items-dialog").show()},W=()=>{document.getElementById("add-meals-dialog").show()},X=()=>{o.Meals&&document.getElementById("remove-meals-dialog").show()};return n.$$set=c=>{"data"in c&&t(11,l=c.data)},[e,o,a,r,d,m,$,g,N,p,L,l,K,j,P,Q,C,z,x,q,F,J,W,X]}class lt extends qe{constructor(s){super(),Re(this,s,Ye,Xe,Le,{data:11},null,[-1,-1])}}export{lt as component};
